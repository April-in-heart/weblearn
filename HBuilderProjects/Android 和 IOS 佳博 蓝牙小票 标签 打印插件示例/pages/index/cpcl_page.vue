<template>
	
	<view class="content">
	<view>
	<button @click="printerCpcl" >打印-CPCL 样板</button>
	 <button @click="getHexString" >图片成生16进制字符串</button>
	</view>
	 <text>{{tip}}</text>
	</view>
	
</template>

<script>
	const plug= uni.requireNativePlugin('Html5app-Gprinter');
	export default {
		data() {
			return {
				tip: ''
			}
		},
		onLoad() {
	
		},
		methods: {
			printerCpcl()
			{
				// 16进制字符串图片
				let img="0000000000000000000000000000000000000000000000000000000000000000000000000000003FFFFFFFFFFFFFFFFFFFFFFFFC3FFFFFFFFFFFFFFFFFFFFFFFFC3FFFFFFFFFFFFFFFFFFFFFFFFC3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000F80000000000000000000C3003FC0000000000000000800C3007FC0000000000000003800C3007000000000000000003800C300700630C0783939C0307E00C3007C07FBF1FC3FBBE0FCFF00C3007F07FFF1FE3FBFF1FEFF00C3001F871E790E3CBCF38E3800C30007C71C780F383873FF3800C30003E71C39FF383873FF3800C30001E71C39FF383873FE3800C30041E71C3B8F383873803800C30063C71C3BCF383873C63D00C3007FC71C39FF383871FE1F00C3003F071C38E7383870780F00C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3000000000000000000000000C3FFFFFFFFFFFFFFFFFFFFFFFFC3FFFFFFFFFFFFFFFFFFFFFFFFC3FFFFFFFFFFFFFFFFFFFFFFFFC000000000000000000000000000000000000000000000000000000000000000000000000000000";
				
				// CPCL 指令打印标签, 详细的CPCL 指令说明，参考CPCL 指令说明书
				let str="! 0 200 200 210 1 \n";
				    str+="TEXT \"0\" 0 30 40 你好啊！中国 \n";
					str+="EG 13 104 50 80 "+img+" \n";
					str+="BARCODE 128 1 1 50 160 80 HORIZ \n";
					str+="TEXT 7 0 210 140 HORIZ \n";
					str+="BARCODE QR 160 160 M 2 U 6 \n";
					str+="MA,15233sdd \n"
					str+="ENDQR \n";
					str+="PRINT \n";
	                 console.log(str);
					 let _this=this;
				     plug.writeCPCL({"cpcl":str},function(e){
					  console.log(JSON.stringify(e));
					  _this.tip=JSON.stringify(e);
				    });
				
		   },
		   getHexString()
		   {
			    //将图片，生成16进制字符串图片数据, 该方法目前只支持安卓
				let image=plus.io.convertLocalFileSystemURL("static/gprinter.png");
				plug.getHexString({width:100,imagePath:image},function(e){

				  console.log(JSON.stringify(e));
				
				});	
		   }
		}
		}

</script>

<style>
	.content {
			margin:45px;
			margin-top:30px;
		}
	button{ margin-bottom:10px;}
</style>
