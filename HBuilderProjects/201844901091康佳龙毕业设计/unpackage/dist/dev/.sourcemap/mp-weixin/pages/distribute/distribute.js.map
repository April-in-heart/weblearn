{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/201844901091康佳龙毕业设计/pages/distribute/distribute.vue?e469","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/201844901091康佳龙毕业设计/pages/distribute/distribute.vue?5bd4","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/201844901091康佳龙毕业设计/pages/distribute/distribute.vue?db18","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/201844901091康佳龙毕业设计/pages/distribute/distribute.vue?8240","uni-app:///pages/distribute/distribute.vue","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/201844901091康佳龙毕业设计/pages/distribute/distribute.vue?458c","webpack:///C:/Users/Administrator/Documents/HBuilderProjects/201844901091康佳龙毕业设计/pages/distribute/distribute.vue?e475"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4G;AACAA,UAAU,CAACC,mBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;AACa;;;AAGtE;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,mQAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAomB,CAAgB,8nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACkCxnB;AACA,MADA,kBACA;AACA;AACA,eADA;AAEA,YAFA;AAGA,cAHA;AAIA,eAJA;AAKA,cALA;AAMA,WANA;AAOA,WAPA;AAQA,WARA;AASA,cATA;AAUA,iBAVA;AAWA,iBAXA;AAYA,kBAZA;AAaA;AACA;AACA;AACA,qCADA;AAEA,qCAFA,CADA;;AAKA,wBALA,EAKA;AACA,gBANA,CAMA;AANA,OADA,CAbA;;AAuBA;AACA,aADA;AAEA,oBAFA;AAGA,iBAHA;AAIA,kBAJA;AAKA,mBALA;AAMA,oBANA;AAOA,2CAPA;AAQA;AACA,qBADA,EACA;AACA,0BAFA,EAEA;AACA,sBAHA,EAGA;AACA,yBAJA,EAIA;AACA,4BALA,EAKA;AACA,2BANA,CAMA;AANA,SARA;;AAiBA;AACA,aADA;AAEA,mBAFA;AAGA,iBAHA;AAIA,kBAJA;AAKA,kBALA,EAKA;AACA,mBANA;AAOA,oBAPA;AAQA,8CARA,EAjBA,CAvBA;;;AAmDA,GArDA;AAsDA,QAtDA,kBAsDA,CAtDA,EAsDA;AACA;AACA;AACA,kBADA;;AAGA;AACA,mBADA;AAEA,aAFA,mBAEA,GAFA,EAEA;AACA;AACA,iBADA,mBACA,GADA,EACA;AACA;AACA;AACA,iDAHA,CAGA;AACA,+CAJA,CAIA;AACA;AACA;AACA;AACA;AACA,6BADA;AAEA,qBAFA,mBAEA,GAFA,EAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,iBAFA;;AAIA;AACA;AACA,oBADA,CACA;AACA;AACA;AACA,iBAJA;AAKA;AACA,oBADA,CACA;AACA;AACA;AACA;AACA;AACA;AACA,kDANA,CAMA;AACA,iDAPA,CAOA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAfA,CAeA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCA1BA,CA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAHA;;AAKA;AACA;AACA,iBAnEA;;;AAsEA,eA3FA;;AA6FA,WAtGA;;AAwGA,OA3GA;;AA6GA,GAxKA;AAyKA,SAzKA,qBAyKA;AACA;AACA;AACA,KAFA,EAEA,IAFA;AAGA,GA7KA;AA8KA;AACA,OADA,iBACA;AACA;AACA;AACA,0BADA;AAEA,eAFA,mBAEA,GAFA,EAEA;AACA,2CADA,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBApCA;;AAsCA;AACA;AACA;AACA;AACA,uBADA;AAEA,8BAFA;AAGA;AACA;AACA;AACA,+BADA;AAEA,8BAFA;AAGA,gCAHA;AAIA,yBAJA,qBAIA;AACA;AACA;AACA;AACA,kCADA;AAEA,gCAFA;;AAIA,wBAJA,CAIA;AACA;AACA;AACA;AACA,6CADA;;AAGA,qBAVA;AAWA,mBAlBA;;AAoBA,eArBA,MAqBA;;AAEA;AACA;AACA,aA7BA;;AA+BA,SAjFA;AAkFA,YAlFA,gBAkFA,CAlFA,EAkFA,iBAlFA;AAmFA,gBAnFA,sBAmFA,EAnFA;;;AAsFA,KAzFA,EA9KA,E;;;;;;;;;;;;;AClCA;AAAA;AAAA;AAAA;AAAs3B,CAAgB,u3BAAG,EAAC,C;;;;;;;;;;;ACA14B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/distribute/distribute.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/distribute/distribute.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./distribute.vue?vue&type=template&id=530478a6&\"\nvar renderjs\nimport script from \"./distribute.vue?vue&type=script&lang=js&\"\nexport * from \"./distribute.vue?vue&type=script&lang=js&\"\nimport style0 from \"./distribute.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/distribute/distribute.vue\"\nexport default component.exports","export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./distribute.vue?vue&type=template&id=530478a6&\"","var components\ntry {\n  components = {\n    \"u-Text\": function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u--text/u--text\" */ \"@/uview-ui/components/u--text/u--text.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./distribute.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./distribute.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view content>\r\n\t\t<map style=\"width: 100vw;height: 60vh;\" :scale=\"scale\" :latitude=\"latitude\" :longitude=\"longitude\" :markers=\"points\" :polyline=\"polyline\"></map>\r\n\t\t<view class=\"box\">\r\n\t\t\t<view class=\"row\">\r\n\t\t\t\t<view class=\"text0\">提示：请先确认单号是否与物品单号一致再开始配送</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"row\">\r\n\t\t\t\t<text class=\"text\">单号</text><view class=\"text\">{{id}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"row\">\r\n\t\t\t\t<text class=\"text\">联系人:</text>\r\n\t\t\t\t<u--text mode=\"name\" :text=\"name\" format=\"encrypt\"></u--text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"row\">\r\n\t\t\t\t<text class=\"text\">联系电话:</text><view class=\"text\">{{phone}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"row\">\r\n\t\t\t\t<text class=\"text\">配送地址:</text><view class=\"text\">{{address}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"row\">\r\n\t\t\t\t<text class=\"text\">预计需要</text><view class=\"text\">{{h==''?'':h+'小时'}}{{m}}分{{s}}秒</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"row\">\r\n\t\t\t\t<text class=\"text\">预计送达时间:</text><view class=\"text\">{{time}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"row\">\r\n\t\t\t\t<button class=\"btn\" @click=\"end\">送达</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tscale:'',\r\n\t\t\t\tid:'',\r\n\t\t\t\tname:'',\r\n\t\t\t\tphone:'',\r\n\t\t\t\ttime:'',\r\n\t\t\t\th:'',\r\n\t\t\t\tm:'',\r\n\t\t\t\ts:'',\r\n\t\t\t\tindex:0,\r\n\t\t\t\taddress:'',\r\n\t\t\t\tlatitude: 0,\r\n\t\t\t\tlongitude: 0,\n                polyline:[\n                    {//指定一系列坐标点，从数组第一项连线至最后一项\n                    　　　　points:[\n                           　　{latitude: 0,longitude: 0},\n                          　　 {latitude: 0,longitude: 0},\n                    　　　　],\n                    　　　　color:\"#77B307\",//线的颜色\n                    　　　　width:2,//线的宽度\n                    　　}\n                ],\r\n\t\t\t\tpoints: [{\r\n\t\t\t\t\tid:0,\r\n\t\t\t\t\ttitle:'起始点',\r\n\t\t\t\t\twidth:50,\r\n\t\t\t\t\theight:50,\r\n\t\t\t\t\tlatitude: 0,\r\n\t\t\t\t\tlongitude: 0,\r\n\t\t\t\t\ticonPath: '/static/img/peisong.png',\n\t\t\t\t\tcallout:{//自定义标记点上方的气泡窗口 点击有效  \n\t\t\t\t\t　　content:'',//文本\n\t\t\t\t\t　　color:'#ffffff',//文字颜色\n\t\t\t\t\t　　fontSize:14,//文本大小\n\t\t\t\t\t　　borderRadius:2,//边框圆角\n\t\t\t\t\t　　bgColor:'#00c16f',//背景颜色\n\t\t\t\t\t　　display:'ALWAYS',//常显\n\t\t\t\t\t},\r\n\t\t\t\t  \r\n\t\t\t\t}, {\r\n\t\t\t\t\tid:1,\r\n\t\t\t\t\ttitle:'终点',\r\n\t\t\t\t\twidth:50,\r\n\t\t\t\t\theight:50,\r\n\t\t\t\t\talpha:0.7,   //透明度\r\n\t\t\t\t\tlatitude: 0,\r\n\t\t\t\t\tlongitude: 0,\r\n\t\t\t\t\ticonPath: '../../static/img/mine2.png'\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tlet that=this;\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle:'加载中'\r\n\t\t\t})\r\n\t\t\tuni.getStorage({\r\n\t\t\t\tkey:'avatar',\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tuni.getLocation({\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tlet Longitude=res.longitude;\r\n\t\t\t\t\t\t\tlet Latitude=res.latitude;\r\n\t\t\t\t\t\t\tthat.points[0].longitude=Longitude;//当前经度\r\n\t\t\t\t\t\t\tthat.points[0].latitude=Latitude;//当前纬度\r\n\t\t\t\t\t\t\tthat.polyline[0].points[0].longitude=Longitude;\r\n\t\t\t\t\t\t\tthat.polyline[0].points[0].latitude=Latitude;\r\n\t\t\t\t\t\t\tconsole.log('当前经纬度：',that.points[0].longitude,that.points[0].latitude);\r\n\t\t\t\t\t\t\tuni.getStorage({\r\n\t\t\t\t\t\t\t\tkey:'drugInfo',\r\n\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\tthat.id=res.data._id;\r\n\t\t\t\t\t\t\t\t\tthat.phone=res.data.phone;\r\n\t\t\t\t\t\t\t\t\tthat.name=res.data.username;\r\n\t\t\t\t\t\t\t\t\tconsole.log(res.data)\r\n\t\t\t\t\t\t\t\t\tthat.address=res.data.address[res.data.index][0];\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tlet hms=res.data.distribTime.split(':');\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tthat.$nextTick(()=>{\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('wait')\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tconst db=uniCloud.database();\r\n\t\t\t\t\t\t\t\t\tdb.collection('identity').where({username:that.name}).get()\r\n\t\t\t\t\t\t\t\t\t.then(res=>{\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(res.result.data[0].avatar);\r\n\t\t\t\t\t\t\t\t\t\tthat.points[1].iconPath=res.result.data[0].avatar;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\tdb.collection('Order_form').where({_id:that.id}).get()\r\n\t\t\t\t\t\t\t\t\t.then(res=>{\r\n\t\t\t\t\t\t\t\t\t\tthat.index=res.result.data[0].index;\r\n\t\t\t\t\t\t\t\t\t\t//longitude\r\n\t\t\t\t\t\t\t\t\t\tlet ads0=res.result.data[0].address[that.index][1];\r\n\t\t\t\t\t\t\t\t\t\t//latitude\r\n\t\t\t\t\t\t\t\t\t\tlet ads1=res.result.data[0].address[that.index][2];\r\n\t\t\t\t\t\t\t\t\t\tthat.points[1].longitude=ads0;//当前经度\r\n\t\t\t\t\t\t\t\t\t\tthat.points[1].latitude=ads1;//当前纬度\r\n\t\t\t\t\t\t\t\t\t\tthat.polyline[0].points[1].longitude=ads0;\r\n\t\t\t\t\t\t\t\t\t\tthat.polyline[0].points[1].latitude=ads1;\r\n\t\t\t\t\t\t\t\t\t\tthat.longitude=((Longitude-ads0)/2+ads0).toFixed(6);\r\n\t\t\t\t\t\t\t\t\t\tthat.latitude=((Latitude-ads1)/2+ads1).toFixed(6);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t//计算距离与需要的时间\r\n\t\t\t\t\t\t\t\t\t\tlet h=0,m=0,s=0;\r\n\t\t\t\t\t\t\t\t\t\tlet speed=5;//骑手速度\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tlet start_lon=that.points[0].longitude;\r\n\t\t\t\t\t\t\t\t\t\tlet start_lat=that.points[0].latitude;\r\n\t\t\t\t\t\t\t\t\t\tlet end_lon=that.points[1].longitude;\r\n\t\t\t\t\t\t\t\t\t\tlet end_lat=that.points[1].latitude;\r\n\t\t\t\t\t\t\t\t\t\tlet radLat1 = (start_lat * Math.PI) / 180.0;\r\n\t\t\t\t\t\t\t\t\t\tlet radLat2 = (end_lat * Math.PI) / 180.0;\r\n\t\t\t\t\t\t\t\t\t\tlet a = radLat1 - radLat2;\r\n\t\t\t\t\t\t\t\t\t\tlet b = (start_lon * Math.PI) / 180.0 - (end_lon * Math.PI) / 180.0;\r\n\t\t\t\t\t\t\t\t\t\tlet x = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a / 2), 2) + Math.cos(radLat1) * Math.cos(radLat2) * Math.pow(Math.sin(b / 2), 2)));\r\n\t\t\t\t\t\t\t\t\t\tx = x * 6378.137; // 地球半径;\r\n\t\t\t\t\t\t\t\t\t\tx = Math.round(x * 10000) / 10000;\r\n\t\t\t\t\t\t\t\t\t\tx=x*1400;\r\n\t\t\t\t\t\t\t\t\t\tlet Distance=Math.ceil(x);\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('距离为：'+x+'m')\r\n\t\t\t\t\t\t\t\t\t\t//计算地图缩放比例3~19,比例尺可以稍大，不能稍小，所以从\r\n\t\t\t\t\t\t\t\t\t\tif(Distance>1000000){that.scale=4;}\r\n\t\t\t\t\t\t\t\t\t\telse if(Distance>500000){that.scale=5;}\r\n\t\t\t\t\t\t\t\t\t\telse if(Distance>200000){that.scale=6;}\r\n\t\t\t\t\t\t\t\t\t\telse if(Distance>100000){that.scale=7;}\r\n\t\t\t\t\t\t\t\t\t\telse if(Distance>50000){that.scale=9;}\r\n\t\t\t\t\t\t\t\t\t\telse if(Distance>20000){that.scale=10;}\r\n\t\t\t\t\t\t\t\t\t\telse if(Distance>10000){that.scale=11;}\r\n\t\t\t\t\t\t\t\t\t\telse if(Distance>5000){that.scale=12;}\r\n\t\t\t\t\t\t\t\t\t\telse if(Distance>2000){that.scale=13;}\r\n\t\t\t\t\t\t\t\t\t\telse if(Distance>1000){that.scale=14;}\r\n\t\t\t\t\t\t\t\t\t\telse if(Distance>500){that.scale=15;}\r\n\t\t\t\t\t\t\t\t\t\telse{that.scale=16;}\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"当前缩放比例：\",that.scale);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\th=parseInt(Distance/(3600*speed));\r\n\t\t\t\t\t\t\t\t\t\tm=parseInt((Distance-h*(3600*speed))/(60*speed));\r\n\t\t\t\t\t\t\t\t\t\ts=parseInt((Distance-h*(3600*speed)-m*(60*speed))/speed);\r\n\t\t\t\t\t\t\t\t\t\tthat.h=h;\r\n\t\t\t\t\t\t\t\t\t\tthat.m=m;\r\n\t\t\t\t\t\t\t\t\t\tthat.s=s;\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"时分秒：\",h,m,s);\r\n\t\t\t\t\t\t\t\t\t\tthat.points[0].callout.content='距离你'+Distance+'米'+'需要'+(h==''?'':h+'小时')+m+'分';\r\n\t\t\t\t\t\t\t\t\t\tlet Time=(parseInt(hms[0])+h)+\":\"+(parseInt(hms[1])+m)+\":\"+(parseInt(hms[2])+s);\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"当前时间:\",hms,\"预计时间:\",Time);\r\n\t\t\t\t\t\t\t\t\t\tthat.time=Time;\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tthat.$nextTick(()=>{\r\n\t\t\t\t\t\t\t\t\t\t\t//DOM元素更新后进行，确保渲染出数据\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('end')\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"中心点经纬度：\",that.longitude,that.latitude)\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"数据库经纬度：\",ads0,ads1);\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tonReady(){\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t}, 2000);\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tend(){\n\t\t\t\tlet that=this;\n\t\t\t\tuniCloud.callFunction({\n\t\t\t\t\tname:'serverDate',\n\t\t\t\t\tsuccess(res){\n\t\t\t\t\t\tvar date,time,ymd,hms,result;//date:Thu, 07 Apr 2022 15:57:16 GMT\n\t\t\t\t\t\tdate=res.header.date.split(' ');\n\t\t\t\t\t\tconsole.log(\"res:\",res.header.date)\n\t\t\t\t\t\tconsole.log(\"date:\",date)\n\t\t\t\t\t\ttime=date[4].split(':');\n\t\t\t\t\t\t//解析月\n\t\t\t\t\t\tswitch(date[2]){\n\t\t\t\t\t\t\tcase \"Jan\":\n\t\t\t\t\t\t\t\tdate[2]=1;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Feb\":\n\t\t\t\t\t\t\t\tdate[2]=2;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Mar\":\n\t\t\t\t\t\t\t\tdate[2]=3;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Apr\":\n\t\t\t\t\t\t\t\tdate[2]=4;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"May\":\n\t\t\t\t\t\t\t\tdate[2]=5;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Jun\":\n\t\t\t\t\t\t\t\tdate[2]=6;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Jul\":\n\t\t\t\t\t\t\t\tdate[2]=7;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Aug\":\n\t\t\t\t\t\t\t\tdate[2]=8;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Sept\":\n\t\t\t\t\t\t\t\tdate[2]=9;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Oct\":\n\t\t\t\t\t\t\t\tdate[2]=10;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Nov\":\n\t\t\t\t\t\t\t\tdate[2]=11;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"Dec\":\n\t\t\t\t\t\t\t\tdate[2]=12;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\thms=(parseInt(time[0])+8)+':'+time[1]+':'+time[2];\n\t\t\t\t\t\tymd=date[3]+'/'+date[2]+'/'+date[1];\n\t\t\t\t\t\tresult=ymd+'|'+hms;\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle:'提示',\n\t\t\t\t\t\t\tcontent:'是否确认送达？',\n\t\t\t\t\t\t\tsuccess: function (res) {\n\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle:'送达成功',\n\t\t\t\t\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\t\t\t\t\tduration:2000,\n\t\t\t\t\t\t\t\t\t\tsuccess() {\n\t\t\t\t\t\t\t\t\t\t\t//根据单号更新时间\n\t\t\t\t\t\t\t\t\t\t\tconst db = uniCloud.database();\n\t\t\t\t\t\t\t\t\t\t\tdb.collection('Order_form').where({_id:that.id}).update({\n\t\t\t\t\t\t\t\t\t\t\t\tendTime:hms,\n\t\t\t\t\t\t\t\t\t\t\t\tcurrent:3\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t.then(res=>{\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('用户点击确定');\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('数据更新成功');\n\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\turl:'../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tconsole.log('用户点击取消');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\tfail(e){console.log(e)},\n\t\t\t\t\tcomplete(){}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.content {\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\tmargin: 30rpx 0 15rpx 0;\r\n\t}\r\n\t.box{\r\n\t\twidth: 96vw;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\t/* 副轴居中对齐 */\r\n\t\t/* align-items: center; */\r\n\t\tmargin: 20rpx 0 0 15rpx;\r\n\t\t/* box-shadow:盒阴影 */\r\n\t\tbox-shadow: 5rpx 5rpx 25rpx 5rpx gainsboro;\r\n\t}\r\n\t.row{\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-start;\r\n\t\tmargin: 10rpx 0 30rpx 20rpx;\r\n\t\tfont-size: 35rpx;\r\n\t\t/* color: rgb(72, 190, 163); */\r\n\t}\r\n\t.btn{\r\n\t\twidth: 240rpx;\r\n\t\theight: 60rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbackground: #77B307;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tborder-radius: 50rpx;\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: white;\r\n\t}\r\n\t.text0{\r\n\t\tcolor: #F56C6C;\r\n\t\tfont-size: 26rpx;\r\n\t\tmargin-top: 15rpx;\r\n\t}\r\n\t.text{\r\n\t\tmargin-right: 15rpx;\r\n\t}\r\n</style>\n","import mod from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./distribute.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./distribute.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1654082244922\n      var cssReload = require(\"G:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}